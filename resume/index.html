<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>My Resuem</title>
	<link rel="stylesheet" href="./loading.css">
	<link rel="stylesheet" href="./main.css">
	<script src="http://at.alicdn.com/t/font_981187_eg70ikkyk6p.js"></script>
	<style type="text/css">
    .icon {
       width: 30px; height: 30px;
       vertical-align: -0.15em;
       fill: white;
       overflow: hidden;
    }
</style>
</head>
<body>
	<div id = "siteWelcome" class="site-welcome active">
		<div class="loading"></div>
	</div>
	<div id="topNavBar" class="topNavBar">
		<div class="topNavBar-inner clearfix">
			<a href="#" class="logo">
			<span class="rs">RS</span><span class="card">card</span>
			</a>
			<nav class="menu">
				<ul class="clearfix">
					<li>
						<a href="#siteAbout">ABOUT</a>
					</li>
					<li>
						<a href="#siteSkills">SKILLS</a>
					</li>
					<li class="menuTrigger">
						<a href="#sitePortfolio">PORTFOLIO</a>
						<ul class="submenu">
							<li>PORTFOLIO1</li>
							<li>PORTFOLIO2</li>
							<li>PORTFOLIO3</li>
						</ul>
					</li>
					<li>
						<a href="#">EXPERIENCE</a>
					</li>
					<li>
						<a href="#">PRICING</a>
					</li>
					<li class="menuTrigger">
						<a href="#">BLOG</a>
						<ul class="submenu">
							<li>BLOG1</li>
							<li>BLOG2</li>
							<li>BLOG3</li>
						</ul>
					</li>
					<li>
						<a href="#">CALENDAR</a>
					</li>
					<li>
						<a href="#">CONTACT</a>
					</li>
					<li>
						<a href="#">OTHER</a>
					</li>
				</ul>
			</nav>
		</div>			
	</div>
	<div class="banner">
		<div class="mask"></div>
	</div>
	<main>
		<div data-x id="siteAbout" class="userCard">
			<div class="textAndPicture clearfix">
				<div class="picture">
				<img src="./img/avatar.jpg" alt="head portrait">
				</div>
				<div class="introduction">
					<span class="welcome">HELLO
						<span class="triangle"></span></span>
					<h1>YaoPujian</h1>
					<p>Web Front-end Development Engineer</p>
					<hr>
					<dl>
						<dt>AGE</dt>
						<dd>28</dd>
						<dt>ADDRESS</dt>
						<dd>Hang Zhou</dd>
						<dt>E-MAIL</dt>
						<dd>yaopujian@icloud.com</dd>
						<dt>PHONE</dt>
						<dd>18888920839</dd>
						<dt>Vacation</dt>
						<dd>till March 15,2019</dd>
					</dl>
				</div>
			</div>
			<footer class="media">
				<a href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter"></use></svg></a>
				<a href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weixin"></use></svg></a>
				<a href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a>
				<a href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo"></use></svg></a>
				<a href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jianshu"></use></svg></a>
				<a href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu"></use></svg></a>
			</footer>
		</div>
		<div class="downloadResume-wrapper">
			<a href="#" class="downloadResume" target="_blank" download>DOWNLOAD RESUME</a>
		<div>
		<p class="selfIntroduction">
			Hello! I’m yaopujian. Senior Web Developer specializing in front end development. Experienced with all stages of the development cycle for dynamic web projects. Well-versed in numerous programming languages including JavaScript, SQL, and C. Stng background in project management and customer relations.
		</p>
	</main>
	<section data-x id="siteSkills" class="skills">
		<h2>Professional Skill</h2>
		<ol class="clearfix">
			<li>
				<h3>HTML 5 &amp; CSS 3</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>JavaScript</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>jQuery</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>Vue</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>React</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
			<li>
				<h3>HTTP</h3>
				<div class="progressBar">
					<div class="progress"></div>
				</div>
			</li>
		</ol>
	</section>
	<section data-x id="sitePortfolio" class="portfolio">
		<h2>Portfolio</h2>
		<nav>
			<ol class="clearfix">
				<li id="portfolio1">ALL</li>
				<li id="portfolio2">Frame</li>
				<li id="portfolio3">JS&amp;CSS</li>
			</ol>
			<div id="portfolioBar" class="bar state-1">
				<div class="bar-innner"></div>
			</div>
		</nav>
		<script>
			portfolio1.onclick=function(){
				portfolioBar.clsassName = "bar state-1"
			}
			portfolio2.onclick=function(){
				portfolioBar.className = "bar state-2"
			}
			portfolio3.onclick=function(){
				portfolioBar.className = "bar state-3"
			}
		</script>
		<div class="works">
			<div class="big">
				<img src="./img/1.jpg" alt="production1">
			</div>
			<div class="small1">
				<img src="./img/2.jpg" alt="production2">
			</div>
			<div class="small2">
				<img src="./img/3.jpg" alt="production3">
			</div>
		</div>
	</section>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script>
	<script>
		// loading动画
		setTimeout(function(){
			siteWelcome.classList.remove('active')
		}, 1000)

		let specialTags = document.querySelectorAll('[data-x]')
		for(let i = 0; i < specialTags.length; i++) {
			specialTags[i].classList.add('offset')
		}
		// 为了userCard刚打开网页就有个动画，所以要在loading之后马上运行一下yyy()函数，但setTimeout的时间不能小于loading的1000ms，不然会被loading遮盖住。
		setTimeout(function(){
			findClosestElement()
		}, 1000)

		window.onscroll = function(xxx){
			if(window.scrollY > 0) {
				topNavBar.classList.add('sticky')
			}else{
				topNavBar.classList.remove('sticky')
			}
			findClosestElement()
		}

		function findClosestElement(){
			let specialTags = document.querySelectorAll('[data-x]')
			let minIndex = 0
			for(let i = 0; i < specialTags.length; i++) {
				if(Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY)){
					minIndex = i
				}
			}
			// minIndex 就是离窗口顶部最近的元素
			specialTags[minIndex].classList.remove('offset')
			let id = specialTags[minIndex].id
			let a = document.querySelector('a[href="#' + id + '"]') //'a[href="#siteAbout"]'
			let li = a.parentNode
			let brothersAndMe = li.parentNode.children
			for(let i = 0; i < brothersAndMe.length; i++){
				brothersAndMe[i].classList.remove('highlight')
			}
			li.classList.add('highlight')
	    }

		let liTags = document.querySelectorAll('nav.menu > ul > li')
		for(let i = 0; i < liTags.length; i++) {
			liTags[i].onmouseenter = function(x) {
				x.currentTarget.classList.add('active')
			}
			liTags[i].onmouseleave = function(x) {
				x.currentTarget.classList.remove('active')
			}
		}
		let aTags = document.querySelectorAll('nav.menu > ul > li > a')

		function animate(time) {
		    requestAnimationFrame(animate);
		    TWEEN.update(time);
		}
		requestAnimationFrame(animate);

		for(let i = 0; i < aTags.length; i ++) {
			aTags[i].onclick = function(x) {
				x.preventDefault()
				let a = x.currentTarget
				let href = a.getAttribute('href')//'#siteAbout'
				let element = document.querySelector(href)
				let top = element.offsetTop
				// let n = 25 //一共动多少次
				// let duration = 500 / n //共500ms，则每动一次多少时间
				// let currentTop = window.scrollY
				// let targetTop = top - 90
				// let distance = (targetTop - currentTop) / n
				// let i = 0
				// let id = setInterval(()=>{
				// 	if(i===n){
				// 		window.clearInterval(id)
				// 		return
				// 	}
				// 	i = i + 1
				// 	window.scrollTo(0, currentTop + distance * i)
				// }, duration)
				// window.scrollTo(0, top - 90)
				let currentTop = window.scrollY
				let targetTop = top - 90
				let s = targetTop - currentTop
				var coords = {y: currentTop }; 
				var t = Math.abs((s / 100)) * 100
				if(t > 500){ t = 500 }
				var tween = new TWEEN.Tween(coords)
			        .to({y: targetTop}, t) 
			        .easing(TWEEN.Easing.Quadratic.InOut) 
			        .onUpdate(function() { 
			           window.scrollTo(0, coords.y) 
			        })
			        .start();
			}
		}
	</script>
</body>
</html>